/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","emotion","@grafana/runtime","@grafana/data"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=53)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){var r=n(21),a=n(14),o=n(37),i=n(38),l=Object.prototype,c=l.hasOwnProperty,s=r((function(e,t){e=Object(e);var n=-1,r=t.length,s=r>2?t[2]:void 0;for(s&&o(t[0],t[1],s)&&(r=1);++n<r;)for(var u=t[n],d=i(u),f=-1,p=d.length;++f<p;){var h=d[f],m=e[h];(void 0===m||a(m,l[h])&&!c.call(e,h))&&(e[h]=u[h])}return e}));e.exports=s},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(11),a=n(30),o=n(31),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},function(e,t,n){var r=n(12),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=r},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(5),a=n(4);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(6).Symbol;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(13))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(10),a=n(16);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=a},function(e,t,n){"use strict";(function(e){var r=n(0);function a(t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var r,a,o="undefined"!=typeof document&&document.attachEvent;if(!o){var i=(a=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)},function(e){return a(e)}),l=(r=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout,function(e){return r(e)}),c=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;c(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=i((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},u=!1,d="",f="animationstart",p="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(u=!0),!1===u)for(var g=0;g<p.length;g++)if(void 0!==m.style[p[g]+"AnimationName"]){d="-"+p[g].toLowerCase()+"-",f=h[g],u=!0;break}var b="resizeanim",v="@"+d+"keyframes "+b+" { from { opacity: 0; } to { opacity: 0; } } ",y=d+"animation: 1ms "+b+"; "}return{addResizeListener:function(e,r){if(o)e.attachEvent("onresize",r);else{if(!e.__resizeTriggers__){var a=e.ownerDocument,i=n.getComputedStyle(e);i&&"static"==i.position&&(e.style.position="relative"),function(e){if(!e.getElementById("detectElementResize")){var n=(v||"")+".resize-triggers { "+(y||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],a=e.createElement("style");a.id="detectElementResize",a.type="text/css",null!=t&&a.setAttribute("nonce",t),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(e.createTextNode(n)),r.appendChild(a)}}(a),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=a.createElement("div")).className="resize-triggers";var l=a.createElement("div");l.className="expand-trigger",l.appendChild(a.createElement("div"));var u=a.createElement("div");u.className="contract-trigger",e.__resizeTriggers__.appendChild(l),e.__resizeTriggers__.appendChild(u),e.appendChild(e.__resizeTriggers__),c(e),e.addEventListener("scroll",s,!0),f&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==b&&c(e)},e.__resizeTriggers__.addEventListener(f,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(o)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(f,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(e){function t(){var e,n,r;o(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,a=e.onResize;if(r._parentNode){var o=r._parentNode.offsetHeight||0,i=r._parentNode.offsetWidth||0,l=window.getComputedStyle(r._parentNode)||{},c=parseInt(l.paddingLeft,10)||0,s=parseInt(l.paddingRight,10)||0,u=parseInt(l.paddingTop,10)||0,d=parseInt(l.paddingBottom,10)||0,f=o-u-d,p=i-c-s;(!t&&r.state.height!==f||!n&&r.state.width!==p)&&(r.setState({height:o-u-d,width:i-c-s}),a({height:o,width:i}))}},r._setRef=function(e){r._autoSizer=e},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=a(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.disableHeight,o=e.disableWidth,i=e.style,c=this.state,s=c.height,u=c.width,d={overflow:"visible"},f={},p=!1;return a||(0===s&&(p=!0),d.height=0,f.height=s),o||(0===u&&(p=!0),d.width=0,f.width=u),Object(r.createElement)("div",{className:n,ref:this._setRef,style:l({},d,i)},!p&&t(f))}}]),t}(r.PureComponent);s.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=s}).call(this,n(13))},function(e,t,n){var r=n(9),a=n(22),o=n(24);e.exports=function(e,t){return o(a(e,t,r),e+"")}},function(e,t,n){var r=n(23),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,l=a(o.length-t,0),c=Array(l);++i<l;)c[i]=o[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=o[i];return s[t]=n(c),r(e,this,s)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(25),a=n(36)(r);e.exports=a},function(e,t,n){var r=n(26),a=n(27),o=n(9),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(28),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){var r=n(29),a=n(35);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(10),a=n(32),o=n(4),i=n(34),l=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,u=c.toString,d=s.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?f:l).test(i(e))}},function(e,t,n){var r=n(11),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[l]=n:delete e[l]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,a=n(33),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(6)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(14),a=n(15),o=n(17),i=n(4);e.exports=function(e,t,n){if(!i(n))return!1;var l=typeof t;return!!("number"==l?a(n)&&o(t,n.length):"string"==l&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(39),a=n(50),o=n(15);e.exports=function(e){return o(e)?r(e,!0):a(e)}},function(e,t,n){var r=n(40),a=n(41),o=n(43),i=n(44),l=n(17),c=n(46),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&a(e),d=!n&&!u&&i(e),f=!n&&!u&&!d&&c(e),p=n||u||d||f,h=p?r(e.length,String):[],m=h.length;for(var g in e)!t&&!s.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||l(g,m))||h.push(g);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(42),a=n(7),o=Object.prototype,i=o.hasOwnProperty,l=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!l.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(5),a=n(7);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(6),a=n(45),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,l=i&&i.exports===o?r.Buffer:void 0,c=(l?l.isBuffer:void 0)||a;e.exports=c}).call(this,n(18)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(47),a=n(48),o=n(49),i=o&&o.isTypedArray,l=i?a(i):r;e.exports=l},function(e,t,n){var r=n(5),a=n(16),o=n(7),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(12),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=l}).call(this,n(18)(e))},function(e,t,n){var r=n(4),a=n(51),o=n(52),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var l in e)("constructor"!=l||!t&&i.call(e,l))&&n.push(l);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){"use strict";n.r(t);var r=n(19),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}function u(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}Object.create;var d,f,p,h,m,g,b,v,y,_,w,x=n(1),E=n(3),j=n.n(E),O=n(0),S=n.n(O),C={delimiter:",",decimalSeparator:".",header:!0,ignoreUnknown:!1,skipRows:0,schema:[]},T={storage:"http"},z=x.LegacyForms.Input,F=x.LegacyForms.FormField,k=n(8),I=function(e){function t(t){var n=e.call(this,t)||this;return n.annotations={},n.jsonData=t.jsonData,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.applyTemplateVariables=function(e,t){var n,r,a,i=function(e){return Object(k.getTemplateSrv)().replace(e,t)};return o(o({},e),{schema:null===(n=e.schema)||void 0===n?void 0:n.map((function(e){var t=e.name,n=e.type;return{name:i(t),type:n}})),path:i(e.path),queryParams:i(e.queryParams),params:null===(r=e.params)||void 0===r?void 0:r.map((function(e){return e.map(i)})),headers:null===(a=e.headers)||void 0===a?void 0:a.map((function(e){return e.map(i)})),body:i(e.body)})},t.prototype.metricFindQuery=function(e,t){return i(this,void 0,Promise,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:n={targets:[o(o({},e),{refId:"metricFindQuery"})],range:t.range,rangeRaw:t.rangeRaw},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.query(n).toPromise()];case 2:return r=i.sent(),[3,4];case 3:return a=i.sent(),[2,Promise.reject(a)];case 4:return r.data.length&&r.data[0].fields.length?[2,r.data[0].fields[0].values.toArray().map((function(e){return{text:e.toString()}}))]:[2,[]]}}))}))},t}(k.DataSourceWithBackend),N=function(e){var t=e.field,n=e.onFieldChange,r=c(Object(O.useState)(t.name),2),a=r[0],i=r[1];Object(O.useEffect)((function(){i(t.name)}),[t]);return S.a.createElement(S.a.Fragment,null,S.a.createElement(x.InlineField,{label:"Field",tooltip:"Name of the CSV column to include.",grow:!0},S.a.createElement(x.QueryField,{query:a,onRunQuery:function(){return n(o(o({},t),{name:a}))},onChange:function(e){return i(e)},portalOrigin:"csv"})),S.a.createElement(x.InlineField,{label:"Type",tooltip:"Set the type of a field. By default, all fields have type String."},S.a.createElement(x.Select,{width:12,value:t.type,onChange:function(e){n(o(o({},t),{type:e.value}))},options:[{label:"String",value:"string"},{label:"Number",value:"number"},{label:"Time",value:"time"},{label:"Boolean",value:"boolean"}]})))},R=function(e){var t=e.value,n=e.onChange,r=e.limit,a=c(Object(O.useState)(t),2),o=a[0],i=a[1];Object(O.useEffect)((function(){i(t)}),[t]);return o.length||function(){if(!r||t.length<r){var e=s(s([],c(o)),[{name:"",type:"string"}]);i(e),n(e)}}(),S.a.createElement(S.a.Fragment,null,o.map((function(e,a){return S.a.createElement(x.InlineFieldRow,{key:a},S.a.createElement(N,{field:e,onFieldChange:(l=a,function(e){var t=o.map((function(t,n){return n===l?e:t}));i(t),n(t)})}),(!r||t.length<r)&&S.a.createElement("a",{className:"gf-form-label"},S.a.createElement(x.Icon,{name:"plus",size:"lg",onClick:function(){return function(e){if(!r||t.length<r){var a=s(s(s([],c(o.slice(0,e+1))),[{name:"",type:"string"}]),c(o.slice(e+1)));i(a),n(a)}}(a)}})),o.length>1&&S.a.createElement("a",{className:"gf-form-label"},S.a.createElement(x.Icon,{name:"minus",size:"lg",onClick:function(){return function(e){var t=o.filter((function(t,n){return n!==e}));i(t),n(t)}(a)}})));var l})))},P=function(e){var t=e.query,n=e.onChange,r=e.onRunQuery,a=e.limit,i=e.editorContext,l=j()(t,C),s=l.header,u=l.skipRows,d=l.delimiter,f=l.decimalSeparator,p=l.ignoreUnknown,h=l.schema,m=c(Object(O.useState)(null==u?void 0:u.toString()),2),g=m[0],b=m[1],v=[{label:"Comma",value:","},{label:"Semicolon",value:";"},{label:"Tab",value:"\t"}],y=[{label:"Point",value:"."},{label:"Comma",value:","}],_=null!==x.InlineSwitch&&void 0!==x.InlineSwitch?x.InlineSwitch:x.Switch;return S.a.createElement(S.a.Fragment,null,S.a.createElement(x.InlineFieldRow,null,S.a.createElement(x.InlineField,{label:"Delimiter",tooltip:"Character used to separate columns"},S.a.createElement(x.Select,{width:13,value:v.find((function(e){return e.value===d})),onChange:function(e){var a;n(o(o({},t),{delimiter:null!==(a=e.value)&&void 0!==a?a:","})),r()},options:v})),S.a.createElement(x.InlineField,{label:"Decimal separator",tooltip:"Character used to separate the integral part from the fractional part of numbers."},S.a.createElement(x.Select,{width:13,value:y.find((function(e){return e.value===f})),onChange:function(e){var a;n(o(o({},t),{decimalSeparator:null!==(a=e.value)&&void 0!==a?a:"."})),r()},options:y})),S.a.createElement(x.InlineField,{label:"Skip leading rows",tooltip:"Number of rows to skip before looking for header"},S.a.createElement(x.Input,{width:5,value:g,onChange:function(e){b(e.currentTarget.value)},onBlur:function(){n(o(o({},t),{skipRows:parseInt(g,10)})),r()}})),S.a.createElement(x.InlineField,{label:"Header",tooltip:"Data contains a header row with field names"},S.a.createElement(_,{value:s,onChange:function(e){n(o(o({},t),{header:e.currentTarget.checked})),r()}})),S.a.createElement(x.InlineField,{disabled:"variables"===i,label:"Ignore unknown",tooltip:"Ignore fields that aren't defined in the schema"},S.a.createElement(_,{value:p,onChange:function(e){n(o(o({},t),{ignoreUnknown:e.currentTarget.checked})),r()}}))),S.a.createElement(R,{value:h,onChange:function(e){n(o(o({},t),{schema:e})),r()},limit:a}))},L=n(2),A=n(20),B=function(e){var t=e.columns,n=e.values,r=e.onChange,a=e.addRowLabel,o=e.onBlur,i=Object(x.useTheme)(),l=D(i),h=function(e,t,a){r(n.map((function(n,r){var o=c(n,2),i=o[0],l=o[1];return t===r?0===e?[a,l]:1===e?[i,a]:[i,l]:[i,l]})))},m=function(e){r(s(s(s([],c(n.slice(0,e+1))),[["",""]]),c(n.slice(e+1))))};return 0===n.length?S.a.createElement(x.Button,{variant:"secondary",onClick:function(){m(0)}},a):S.a.createElement("table",{className:l.root},S.a.createElement("thead",{className:l.thead},S.a.createElement("tr",{className:l.row},t.map((function(e,t){return S.a.createElement("th",{key:t,className:l.th},e)})),S.a.createElement("th",{className:l.th}))),S.a.createElement("tbody",{className:l.tbody},n.map((function(e,t){return S.a.createElement("tr",{key:t,className:l.row},e.map((function(e,n){return S.a.createElement("td",{key:n,className:l.td},S.a.createElement("input",{value:e,onChange:function(e){return h(n,t,e.currentTarget.value)},onBlur:o,className:l.input}))})),S.a.createElement("td",{className:l.td},S.a.createElement("div",{className:Object(L.css)(d||(d=u(["\n                  display: flex;\n                  & > * {\n                    margin-right: ",";\n                  }\n                  & > *:last-child {\n                    margin-right: 0;\n                  }\n                "],["\n                  display: flex;\n                  & > * {\n                    margin-right: ",";\n                  }\n                  & > *:last-child {\n                    margin-right: 0;\n                  }\n                "])),i.spacing.xs)},S.a.createElement("a",{className:Object(L.css)(f||(f=u(["\n                    display: flex;\n                    background: ",";\n                    padding: "," ",";\n                    align-items: center;\n                    border-radius: ",";\n                  "],["\n                    display: flex;\n                    background: ",";\n                    padding: "," ",";\n                    align-items: center;\n                    border-radius: ",";\n                  "])),i.colors.bg2,i.spacing.xs,i.spacing.sm,i.border.radius.sm),onClick:function(){return m(t)}},S.a.createElement(x.Icon,{name:"plus"})),S.a.createElement("a",{className:Object(L.css)(p||(p=u(["\n                    display: flex;\n                    background: ",";\n                    padding: "," ",";\n                    align-items: center;\n                    border-radius: ",";\n                  "],["\n                    display: flex;\n                    background: ",";\n                    padding: "," ",";\n                    align-items: center;\n                    border-radius: ",";\n                  "])),i.colors.bg2,i.spacing.xs,i.spacing.sm,i.border.radius.sm),onClick:function(){return e=t,void r(s(s([],c(n.slice(0,e))),c(n.slice(e+1))));var e}},S.a.createElement(x.Icon,{name:"minus"})))))}))))},D=Object(x.stylesFactory)((function(e){return{root:Object(L.css)(h||(h=u(["\n      table-layout: auto;\n      border: 1px solid ",";\n      border-collapse: separate;\n      border-radius: ",";\n      border-spacing: 0;\n      border-left: 0;\n      width: 100%;\n    "],["\n      table-layout: auto;\n      border: 1px solid ",";\n      border-collapse: separate;\n      border-radius: ",";\n      border-spacing: 0;\n      border-left: 0;\n      width: 100%;\n    "])),e.colors.formInputBorder,e.border.radius.sm),thead:Object(L.css)(m||(m=u(["\n      display: table-header-group;\n      vertical-align: middle;\n      border-color: inherit;\n      border-collapse: separate;\n\n      &:first-child tr:first-child th:first-child {\n        border-radius: "," 0 0 0;\n      }\n      &:last-child tr:last-child th:first-child {\n        border-radius: 0 0 0 ",";\n      }\n    "],["\n      display: table-header-group;\n      vertical-align: middle;\n      border-color: inherit;\n      border-collapse: separate;\n\n      &:first-child tr:first-child th:first-child {\n        border-radius: "," 0 0 0;\n      }\n      &:last-child tr:last-child th:first-child {\n        border-radius: 0 0 0 ",";\n      }\n    "])),e.border.radius.sm,e.border.radius.sm),tbody:Object(L.css)(g||(g=u(["\n      &:first-child tr:first-child td:first-child {\n        border-radius: "," 0 0 0;\n      }\n\n      &:last-child tr:last-child td:first-child {\n        border-radius: 0 0 0 ",";\n      }\n    "],["\n      &:first-child tr:first-child td:first-child {\n        border-radius: "," 0 0 0;\n      }\n\n      &:last-child tr:last-child td:first-child {\n        border-radius: 0 0 0 ",";\n      }\n    "])),e.border.radius.sm,e.border.radius.sm),input:Object(L.css)(b||(b=u(["\n      outline: none;\n      border: 0;\n      background: transparent;\n      width: 100%;\n    "],["\n      outline: none;\n      border: 0;\n      background: transparent;\n      width: 100%;\n    "]))),row:Object(L.css)(v||(v=u(["\n      display: table-row;\n      vertical-align: inherit;\n      border-color: inherit;\n    "],["\n      display: table-row;\n      vertical-align: inherit;\n      border-color: inherit;\n    "]))),th:Object(L.css)(y||(y=u(["\n      padding: "," ",";\n      border-left: solid "," 1px;\n      font-size: ",";\n      color: ",";\n      font-weight: ",";\n\n      &:last-child {\n        border-left: 0;\n      }\n    "],["\n      padding: "," ",";\n      border-left: solid "," 1px;\n      font-size: ",";\n      color: ",";\n      font-weight: ",";\n\n      &:last-child {\n        border-left: 0;\n      }\n    "])),e.spacing.xs,e.spacing.sm,e.colors.formInputBorder,e.typography.size.sm,e.colors.textSemiWeak,e.typography.weight.regular),td:Object(L.css)(_||(_=u(["\n      padding: "," ",";\n      border: 1px solid transparent;\n      border-left: solid "," 1px;\n      border-top: solid "," 1px;\n      background-color: ",";\n      &:last-child {\n        border-left: 0;\n        width: 32px;\n        padding-left: 0;\n        padding-right: ",";\n      }\n    "],["\n      padding: "," ",";\n      border: 1px solid transparent;\n      border-left: solid "," 1px;\n      border-top: solid "," 1px;\n      background-color: ",";\n      &:last-child {\n        border-left: 0;\n        width: 32px;\n        padding-left: 0;\n        padding-right: ",";\n      }\n    "])),e.spacing.xs,e.spacing.sm,e.colors.formInputBorder,e.colors.formInputBorder,e.colors.formInputBg,e.spacing.xs)}})),q=function(e){var t=e.method,n=e.onMethodChange,r=e.path,a=e.onPathChange;return S.a.createElement(x.InlineFieldRow,null,S.a.createElement(x.InlineField,null,S.a.createElement(x.Select,{value:t,options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"}],onChange:function(e){var t;return n(null!==(t=e.value)&&void 0!==t?t:"GET")}})),S.a.createElement(x.InlineField,{grow:!0},S.a.createElement(x.Input,{placeholder:"/orders/${orderId}",value:r,onChange:function(e){return a(e.currentTarget.value)}})))},W=["authorization","proxy-authorization","x-api-key"],M=function(e){var t,n,r,a,i,l,s=e.query,d=e.onChange,f=e.onRunQuery,p=e.fieldsTab,h=e.experimentalTab,m=e.datasource,g=c(Object(O.useState)("plaintext"),2),b=g[0],v=g[1],y=c(Object(O.useState)(0),2),_=y[0],E=y[1],T=Object(x.useTheme)(),z=j()(s,C),F=function(e){d(o(o({},z),{body:e})),f()},k=[{title:"Fields",disabled:!1,content:p},{title:"Path",disabled:!1,content:"http"===m.jsonData.storage?S.a.createElement(q,{method:null!==(t=z.method)&&void 0!==t?t:"GET",onMethodChange:function(e){d(o(o({},z),{method:e})),f()},path:null!==(n=z.path)&&void 0!==n?n:"",onPathChange:function(e){d(o(o({},z),{path:e})),f()}}):S.a.createElement(x.InlineField,{label:"Relative path",tooltip:"The path here is relative to the URL defined in the data source configuration."},S.a.createElement(x.Input,{placeholder:"file.csv",value:null!==(r=z.path)&&void 0!==r?r:"",onChange:function(e){d(o(o({},z),{path:e.currentTarget.value})),f()}}))},{title:"Params",disabled:"http"!==m.jsonData.storage,content:S.a.createElement(B,{addRowLabel:"Add param",columns:["Key","Value"],values:null!==(a=z.params)&&void 0!==a?a:[],onChange:function(e){d(o(o({},z),{params:e})),f()},onBlur:function(){return f()}})},{title:"Headers",disabled:"http"!==m.jsonData.storage,content:S.a.createElement(B,{addRowLabel:"Add header",columns:["Key","Value"],values:null!==(i=z.headers)&&void 0!==i?i:[],onChange:function(e){d(o(o({},z),{headers:e})),f()},onBlur:function(){return f()}})},{title:"Body",disabled:"http"!==m.jsonData.storage,content:S.a.createElement(S.a.Fragment,null,S.a.createElement(x.InlineFieldRow,null,S.a.createElement(x.InlineField,{label:"Syntax highlighting"},S.a.createElement(x.RadioButtonGroup,{value:b,onChange:function(e){return v(null!=e?e:"plaintext")},options:[{label:"Text",value:"plaintext"},{label:"JSON",value:"json"},{label:"XML",value:"xml"}]}))),S.a.createElement(x.InlineFieldRow,null,S.a.createElement(A.a,{disableHeight:!0,className:Object(L.css)(w||(w=u(["\n                margin-bottom: ",";\n              "],["\n                margin-bottom: ",";\n              "])),T.spacing.sm)},(function(e){var t=e.width;return S.a.createElement(x.CodeEditor,{value:z.body||"",language:b,width:t,height:"200px",showMiniMap:!1,showLineNumbers:!0,onBlur:F})}))))},{title:"Experimental",disabled:!1,content:h}].filter((function(e){return!e.disabled}));return S.a.createElement(S.a.Fragment,null,k.length>1&&S.a.createElement(x.InlineFieldRow,null,S.a.createElement(x.InlineField,null,S.a.createElement(x.RadioButtonGroup,{onChange:function(e){return E(null!=e?e:0)},value:_,options:k.map((function(e,t){return{label:e.title,value:t}}))}))),"GET"===z.method&&z.body&&S.a.createElement(x.InfoBox,{severity:"warning",style:{maxWidth:"700px",whiteSpace:"normal"}},"GET requests can't have a body. The body you've defined will be ignored."),(null!==(l=z.headers)&&void 0!==l?l:[]).map((function(e){var t=c(e,2),n=t[0];t[1];return n.toLowerCase()})).find((function(e){return W.includes(e)}))&&S.a.createElement(x.InfoBox,{severity:"warning",style:{maxWidth:"700px",whiteSpace:"normal"}},"It looks like you're adding credentials in the header. Since queries are stored unencrypted, it's strongly recommended that you add any secrets to the data source config instead."),k[_].content)},H=function(e){var t,n=e.query,r=e.onChange,a=e.onRunQuery,i=e.limitFields,l=e.editorContext,c=null!==x.InlineSwitch&&void 0!==x.InlineSwitch?x.InlineSwitch:x.Switch;return S.a.createElement(M,o({},e,{fieldsTab:S.a.createElement(P,{query:n,onChange:r,onRunQuery:a,limit:i,editorContext:l||"default"}),experimentalTab:S.a.createElement(S.a.Fragment,null,S.a.createElement(x.InfoBox,{severity:"warning",style:{maxWidth:"700px",whiteSpace:"normal"}},S.a.createElement("p",null,"The features listed here are experimental. They might change or be removed without notice. In the tooltip for\n          each feature, there's a link to a pull request where you can submit feedback for that feature.")),S.a.createElement(x.InlineFieldRow,null,S.a.createElement(x.InlineField,{label:"Enable regular expressions",tooltip:S.a.createElement(S.a.Fragment,null,S.a.createElement("p",null,"When enabled, field names become regular expressions and can be used to set a type for multiple fields at once."),S.a.createElement("a",{href:"https://github.com/marcusolsson/grafana-csv-datasource/issues/68",target:"_blank",rel:"noreferrer"},"Share feedback"))},S.a.createElement(c,{value:!!(null===(t=n.experimental)||void 0===t?void 0:t.regex),onChange:function(e){r(o(o({},n),{experimental:{regex:e.currentTarget.checked}})),a()}}))))}))};n.d(t,"plugin",(function(){return U}));var U=new r.DataSourcePlugin(I).setConfigEditor((function(e){var t=e.options,n=e.onOptionsChange,r=j()(t.jsonData,T);return S.a.createElement(S.a.Fragment,null,S.a.createElement(x.Field,null,S.a.createElement(x.RadioButtonGroup,{options:[{label:"HTTP",value:"http"},{label:"Local",value:"local"}],value:r.storage,onChange:function(e){n(o(o({},t),{jsonData:o(o({},r),{storage:e})}))}})),"http"===r.storage?S.a.createElement(S.a.Fragment,null,S.a.createElement(x.DataSourceHttpSettings,{defaultUrl:"http://localhost:8080",dataSourceConfig:t,onChange:n}),S.a.createElement("h3",{className:"page-heading"},"Misc"),S.a.createElement("div",{className:"gf-form-group"},S.a.createElement("div",{className:"gf-form-inline"},S.a.createElement("div",{className:"gf-form max-width-30"},S.a.createElement(F,{label:"Custom query parameters",labelWidth:14,tooltip:"Add custom parameters to your queries.",inputEl:S.a.createElement(z,{className:"width-25",value:r.queryParams,onChange:function(e){n(o(o({},t),{jsonData:o(o({},r),{queryParams:e.currentTarget.value})}))},spellCheck:!1,placeholder:"page=1&limit=100"})}))))):null,"local"===r.storage?S.a.createElement(S.a.Fragment,null,S.a.createElement(x.Legend,null,"Local"),S.a.createElement(x.InlineField,{label:"Path",tooltip:"Path to the CSV file."},S.a.createElement(z,{value:t.url,onChange:function(e){n(o(o({},t),{url:e.currentTarget.value}))},spellCheck:!1}))):null)})).setQueryEditor(H).setVariableQueryEditor((function(e){var t=e.onChange,n=e.query,r=e.datasource;return S.a.createElement(H,{onRunQuery:function(){},onChange:function(e){e&&t(e,e.schema[0].name)},query:o(o({},n),{ignoreUnknown:!0}),datasource:r,limitFields:1,editorContext:"variables"})}))}])}));
//# sourceMappingURL=module.js.map